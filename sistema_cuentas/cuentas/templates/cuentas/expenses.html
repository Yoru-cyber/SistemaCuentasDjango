{% extends "cuentas/base.html" %} {% block content %}
{% load heroicons %}
<h1 class="text-3xl text-center">Gastos</h1>

<div class="flex flex-col justify-center items-center w-full">
  <form
    action=""
    method="GET"
    class="flex flex-col sm:flex-row flex-wrap justify-center w-fit sm:space-x-3"
  >
    <div class="form-group">
      <label
        for="name"
        class="input input-bordered flex items-center gap-2 bg-white"
      >
        {% heroicon_outline "pencil" %}
        <input
          type="text"
          id="name"
          name="name"
          class="grow"
          placeholder="Nombre"
        />
      </label>
    </div>
    <div class="form-group">
      <label
        for="date"
        class="input input-bordered flex items-center gap-2 bg-white"
      >
      {% heroicon_outline "calendar" %}
        <input
          type="text"
          id="date"
          name="date"
          class="grow"
          placeholder="Fecha"
        />
      </label>
    </div>
    <button class="btn btn-outline btn-info order-1" type="submit">
      {% heroicon_outline "magnifying-glass" %}Buscar
    </button>
  </form>
</div>

<div id="content" class="flex flex-col items-center w-screen h-screen mt-5">
  <div
    class="overflow-x-auto bg-white border-solid border-2 lg:w-3/6 w-screen border-zinc-200 shadow-2xl text-zinc-700 rounded-lg"
  >
    <table class="table table-sm">
      <thead class="text-lg text-zinc-600 text-center">
        <tr>
          <th>#</th>
          <th>Nombre</th>
          <th>Categoría</th>
          <th>Valor</th>
          <th>Fecha</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody class="text-center">
        {% for expense in page_obj %}
        <tr id="{{ expense.id }}">
          <th>{{ expense.id }}</th>
          <td>{{ expense.name }}</td>
          <td>{{ expense.category }}</td>
          <td>{{ expense.value }}</td>
          <td>{{ expense.date|date:"SHORT_DATE_FORMAT" }}</td>
          <th>
            <ul class="flex flex-row space-x-5 justify-center">
              <li>
                <a
                  class="btn btn-outline btn-warning"
                  href="{%url 'cuentas:expense_update' expense.id %}"
                >
                  {% heroicon_outline "pencil" %}
                </a>
              </li>
              <li>
                <form
                  action="{%url 'cuentas:expense_delete' expense.id %}"
                  method="POST"
                >
                  {% csrf_token %}
                  <button
                    class="btn btn-outline btn-error"
                    onclick="return confirm('¿Está seguro de borrar este elemento?\nEsta acción es irreversible.')"
                  >
                    {% heroicon_outline "trash" %}
                  </button>
                </form>
              </li>
            </ul>
          </th>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">1</a>
            <a href="?page={{ page_obj.previous_page_number }}">Anterior</a>
        {% endif %}

        <span class="current">
            Página {{ page_obj.number }} de {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">Siguiente</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">{{page_obj.paginator.num_pages}}</a>
        {% endif %}
    </span>
</div>
</div>

<a href="{% url 'cuentas:expense_create' %}" class="btn btn-outline btn-success fixed w-fit bottom-0 right-0 mb-10 sm:mb-5 m-2 p-2">Nuevo Gasto
  {% heroicon_outline "plus" %}
{% endblock %}
